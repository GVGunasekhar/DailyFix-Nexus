{"ast":null,"code":"import*as React from'react';import{useState,useRef,useEffect}from'react';import{AIFeatures}from'../AIFeatures';import{ConversationSettings}from'../ConversationSettings';// Add type definitions for Web Speech API\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// Update the styles by removing date-related CSS\nconst styles=\"\\n.conversation-content {\\n  padding: 16px;\\n  background-color: #e5ddd5;\\n  height: calc(100vh - 180px);\\n  overflow-y: auto;\\n}\\n\\n.message-history {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.message-item {\\n  display: flex;\\n  flex-direction: column;\\n  max-width: 70%;\\n}\\n\\n.message-item.incoming {\\n  align-self: flex-start;\\n}\\n\\n.message-item.outgoing {\\n  align-self: flex-end;\\n}\\n\\n.message-bubble {\\n  padding: 8px 12px;\\n  border-radius: 8px;\\n  position: relative;\\n  margin-bottom: 4px;\\n}\\n\\n.message-item.incoming .message-bubble {\\n  background-color: #ffffff;\\n  border-top-left-radius: 0;\\n}\\n\\n.message-item.outgoing .message-bubble {\\n  background-color: #dcf8c6;\\n  border-top-right-radius: 0;\\n}\\n\\n.message-content {\\n  margin-bottom: 4px;\\n}\\n\\n.message-meta {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n  font-size: 0.75rem;\\n  color: #667781;\\n}\\n\\n.platform-badge {\\n  padding: 2px 6px;\\n  border-radius: 4px;\\n  font-size: 0.7rem;\\n  background-color: rgba(0, 0, 0, 0.1);\\n}\\n\\n.message-time {\\n  font-size: 0.7rem;\\n  color: #667781;\\n}\\n\\n.header-actions {\\n  display: flex;\\n  gap: 8px;\\n  position: relative;\\n}\\n\\n.settings-button {\\n  background: none;\\n  border: none;\\n  padding: 8px;\\n  cursor: pointer;\\n  border-radius: 50%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: background-color 0.2s;\\n  font-size: 1.5rem;\\n  line-height: 1;\\n  color: #666;\\n}\\n\\n.settings-button:hover {\\n  background-color: #f5f5f5;\\n}\\n\\n.settings-button span {\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n}\\n\";export const ConversationView=_ref=>{var _conversation$platfor;let{conversation}=_ref;const[isSettingsOpen,setIsSettingsOpen]=useState(false);const[isRecording,setIsRecording]=useState(false);const[isVoiceCommand,setIsVoiceCommand]=useState(false);const[messageText,setMessageText]=useState('');const[recordedAudio,setRecordedAudio]=useState(null);const mediaRecorderRef=useRef(null);const audioChunksRef=useRef([]);const speechRecognitionRef=useRef(null);const[showSettings,setShowSettings]=useState(false);const[messages,setMessages]=useState([]);useEffect(()=>{// Initialize speech recognition\nif('SpeechRecognition'in window||'webkitSpeechRecognition'in window){const SpeechRecognitionAPI=window.SpeechRecognition||window.webkitSpeechRecognition;if(SpeechRecognitionAPI){speechRecognitionRef.current=new SpeechRecognitionAPI();speechRecognitionRef.current.continuous=true;speechRecognitionRef.current.interimResults=true;speechRecognitionRef.current.onresult=event=>{const results=Array.from(event.results);const transcript=results.map(result=>result[0].transcript).join('');if(event.results[0].isFinal){handleVoiceCommand(transcript.toLowerCase());}};speechRecognitionRef.current.onerror=event=>{console.error('Speech recognition error:',event.error);setIsVoiceCommand(false);};}}},[]);const handleVoiceCommand=command=>{// Enhanced voice command handling\nif(command.includes('tag')||command.includes('label')){var _command$split$pop;const tag=(_command$split$pop=command.split(/tag|label/).pop())===null||_command$split$pop===void 0?void 0:_command$split$pop.trim();if(tag){addContextualTag(tag);}}else if(command.includes('priority')){const level=command.toLowerCase().includes('high')?'High':command.toLowerCase().includes('medium')?'Medium':'Low';updatePriority(level);}else if(command.includes('summarize')){generateDailySummary();}else if(command.includes('suggest reply')){generateAIReply();}else if(command.includes('matrix room')){handleMatrixRoom(command);}else{// Default to message text\nsetMessageText(command);}setIsVoiceCommand(false);};const addContextualTag=tag=>{// Implementation for adding contextual tags\nif(conversation){const updatedTags=[...conversation.contextualTags,tag];// Update conversation tags\nconsole.log('Added tag:',tag);}};const updatePriority=level=>{// Implementation for updating priority\nif(conversation){console.log('Updated priority to:',level);}};const generateDailySummary=async()=>{// Implementation for generating daily summary\nif(conversation!==null&&conversation!==void 0&&conversation.messages){// Group messages by date and generate summary\nconsole.log('Generating daily summary...');}};const generateAIReply=async()=>{// Implementation for AI-generated replies\nif(conversation!==null&&conversation!==void 0&&conversation.lastMessage){// Generate AI reply based on context\nconsole.log('Generating AI reply...');}};const handleMatrixRoom=command=>{// Implementation for Matrix.org room management\nconsole.log('Handling Matrix room command:',command);};const startVoiceCommand=()=>{if(speechRecognitionRef.current){setIsVoiceCommand(true);speechRecognitionRef.current.start();}else{alert('Speech recognition is not supported in your browser');}};const stopVoiceCommand=()=>{if(speechRecognitionRef.current){speechRecognitionRef.current.stop();setIsVoiceCommand(false);}};const handleSendMessage=()=>{if(recordedAudio){// Handle voice message\nconsole.log('Sending voice message:',recordedAudio.blob);setRecordedAudio(null);}else if(messageText.trim()){// Create new message object\nconst newMessage={id:Date.now().toString(),text:messageText,sender:'user',timestamp:new Date(),platform:(conversation===null||conversation===void 0?void 0:conversation.platforms[0])||'WhatsApp'};// Add message to history\nsetMessages(prevMessages=>[...prevMessages,newMessage]);// Update conversation content\nif(conversation!==null&&conversation!==void 0&&conversation.platformMessages){const newPlatformMessage={platform:conversation.platforms[0],messages:[messageText],isFromSender:true,lastActivity:new Date()};conversation.platformMessages.push(newPlatformMessage);}// Clear input\nsetMessageText('');}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage();}};const startRecording=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const mediaRecorder=new MediaRecorder(stream);mediaRecorderRef.current=mediaRecorder;audioChunksRef.current=[];mediaRecorder.ondataavailable=event=>{if(event.data.size>0){audioChunksRef.current.push(event.data);}};mediaRecorder.onstop=()=>{const audioBlob=new Blob(audioChunksRef.current,{type:'audio/wav'});const audioUrl=URL.createObjectURL(audioBlob);setRecordedAudio({blob:audioBlob,url:audioUrl});};mediaRecorder.start();setIsRecording(true);}catch(error){console.error('Error accessing microphone:',error);alert('Unable to access microphone. Please check permissions.');}};const stopRecording=()=>{if(mediaRecorderRef.current&&isRecording){mediaRecorderRef.current.stop();mediaRecorderRef.current.stream.getTracks().forEach(track=>track.stop());setIsRecording(false);}};const handleVoiceButtonClick=()=>{if(isRecording){stopRecording();}else{startRecording();}};const handleSettingsClick=action=>{switch(action){case'search':const searchText=prompt('Enter text to search in chat:');if(searchText){alert(\"Searching for: \".concat(searchText));}break;case'media':alert('Opening media gallery');break;case'clear':if(window.confirm('Are you sure you want to clear this chat?')){alert('Chat cleared');}break;case'block':if(window.confirm('Are you sure you want to block this contact?')){alert('Contact blocked');}break;case'export':alert('Exporting chat...');break;case'mute':alert('Notifications muted');break;}setIsSettingsOpen(false);};const handleAIReplySelect=reply=>{setMessageText(reply);// This will update the message input\n};if(!conversation){return/*#__PURE__*/_jsx(\"div\",{className:\"conversation-placeholder\",children:\"Select a conversation to start messaging\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h2\",{children:conversation.contact.name}),/*#__PURE__*/_jsx(\"div\",{className:\"platform-badges\",children:conversation.platforms.map(platform=>/*#__PURE__*/_jsx(\"span\",{className:\"platform-badge\",\"data-platform\":platform,children:platform},platform))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"settings-button\",onClick:e=>{e.stopPropagation();setShowSettings(!showSettings);},children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"settings\",children:\"\\u22EE\"})}),showSettings&&/*#__PURE__*/_jsx(ConversationSettings,{onClose:()=>setShowSettings(false)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"conversation-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-history\",children:[conversation===null||conversation===void 0?void 0:(_conversation$platfor=conversation.platformMessages)===null||_conversation$platfor===void 0?void 0:_conversation$platfor.sort((a,b)=>a.lastActivity.getTime()-b.lastActivity.getTime()).map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message-item \".concat(msg.isFromSender?'outgoing':'incoming'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble\",children:[msg.messages.map((text,msgIndex)=>/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:text},msgIndex)),/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:msg.lastActivity.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true})}),/*#__PURE__*/_jsx(\"span\",{className:\"platform-badge\",\"data-platform\":msg.platform,children:msg.platform})]})]})},\"\".concat(msg.platform,\"-\").concat(index))),messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"message-item outgoing\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:message.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:message.timestamp.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true})}),/*#__PURE__*/_jsx(\"span\",{className:\"platform-badge\",\"data-platform\":message.platform,children:message.platform})]})]})},message.id))]})}),/*#__PURE__*/_jsx(AIFeatures,{conversation:conversation,onReplySelect:handleAIReplySelect}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-input-container\",children:[recordedAudio?/*#__PURE__*/_jsxs(\"div\",{className:\"recorded-audio\",children:[/*#__PURE__*/_jsx(\"audio\",{src:recordedAudio.url,controls:true}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-audio\",onClick:()=>setRecordedAudio(null),title:\"Cancel\",children:\"\\u274C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"message-input \".concat(isVoiceCommand?'voice-active':''),placeholder:isVoiceCommand?'Listening for voice command...':'Type a message or use voice command...',value:messageText,onChange:e=>setMessageText(e.target.value),onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-command-button \".concat(isVoiceCommand?'active':''),title:isVoiceCommand?'Stop Voice Command':'Start Voice Command',onClick:()=>isVoiceCommand?stopVoiceCommand():startVoiceCommand(),children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"voice-command\",children:isVoiceCommand?'üéôÔ∏è':'üó£Ô∏è'})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-button \".concat(isRecording?'recording':''),title:isRecording?'Stop Recording':'Start Voice Recording',onClick:handleVoiceButtonClick,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"voice\",children:isRecording?'‚èπÔ∏è':'üé§'})}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button \".concat(messageText.trim()||recordedAudio?'active':''),onClick:handleSendMessage,disabled:!messageText.trim()&&!recordedAudio,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"send\",children:\"\\uD83D\\uDCE4\"})})]})]});};// Helper function to generate AI replies (mock implementation)\nconst generateAIReplies=async messages=>{// In a real implementation, this would call your AI service\nconst commonReplies=[\"I'll look into this and get back to you shortly\",\"Thanks for bringing this to my attention\",\"Could you clarify your requirements?\",\"Let me check with the team and update you\",\"I understand, I'll prioritize this task\",\"Would you like to schedule a call to discuss this?\"];// Simulate API delay\nawait new Promise(resolve=>setTimeout(resolve,1000));// Return 3 random replies\nreturn commonReplies.sort(()=>Math.random()-0.5).slice(0,3);};","map":{"version":3,"names":["React","useState","useRef","useEffect","AIFeatures","ConversationSettings","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","styles","ConversationView","_ref","_conversation$platfor","conversation","isSettingsOpen","setIsSettingsOpen","isRecording","setIsRecording","isVoiceCommand","setIsVoiceCommand","messageText","setMessageText","recordedAudio","setRecordedAudio","mediaRecorderRef","audioChunksRef","speechRecognitionRef","showSettings","setShowSettings","messages","setMessages","window","SpeechRecognitionAPI","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","onresult","event","results","Array","from","transcript","map","result","join","isFinal","handleVoiceCommand","toLowerCase","onerror","console","error","command","includes","_command$split$pop","tag","split","pop","trim","addContextualTag","level","updatePriority","generateDailySummary","generateAIReply","handleMatrixRoom","updatedTags","contextualTags","log","lastMessage","startVoiceCommand","start","alert","stopVoiceCommand","stop","handleSendMessage","blob","newMessage","id","Date","now","toString","text","sender","timestamp","platform","platforms","prevMessages","platformMessages","newPlatformMessage","isFromSender","lastActivity","push","handleKeyPress","e","key","shiftKey","preventDefault","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","ondataavailable","data","size","onstop","audioBlob","Blob","type","audioUrl","URL","createObjectURL","url","stopRecording","getTracks","forEach","track","handleVoiceButtonClick","handleSettingsClick","action","searchText","prompt","concat","confirm","handleAIReplySelect","reply","className","children","contact","name","onClick","stopPropagation","role","onClose","sort","a","b","getTime","msg","index","msgIndex","toLocaleTimeString","hour","minute","hour12","message","onReplySelect","src","controls","title","placeholder","value","onChange","target","onKeyPress","disabled","generateAIReplies","commonReplies","Promise","resolve","setTimeout","Math","random","slice"],"sources":["C:/Users/swamy.LAPTOP-0RVCTRRS/OneDrive/Desktop/Dailyfix Nexus/src/components/ConversationView/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { AIFeatures } from '../AIFeatures';\nimport type { Conversation, PlatformMessage, PriorityLevel } from '../../types/conversation';\nimport { ConversationSettings } from '../ConversationSettings';\n\n// Add type definitions for Web Speech API\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n  resultIndex: number;\n}\n\ninterface SpeechRecognitionError extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResult {\n  isFinal: boolean;\n  [index: number]: SpeechRecognitionAlternative;\n}\n\ninterface SpeechRecognitionAlternative {\n  transcript: string;\n  confidence: number;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onresult: (event: SpeechRecognitionEvent) => void;\n  onerror: (event: SpeechRecognitionError) => void;\n  start(): void;\n  stop(): void;\n  abort(): void;\n}\n\ninterface SpeechRecognitionConstructor {\n  new (): SpeechRecognition;\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition?: SpeechRecognitionConstructor;\n    webkitSpeechRecognition?: SpeechRecognitionConstructor;\n  }\n}\n\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'user' | 'contact';\n  timestamp: Date;\n  platform: string;\n}\n\ninterface ConversationViewProps {\n  conversation: Conversation | null;\n}\n\n// Update the styles by removing date-related CSS\nconst styles = `\n.conversation-content {\n  padding: 16px;\n  background-color: #e5ddd5;\n  height: calc(100vh - 180px);\n  overflow-y: auto;\n}\n\n.message-history {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.message-item {\n  display: flex;\n  flex-direction: column;\n  max-width: 70%;\n}\n\n.message-item.incoming {\n  align-self: flex-start;\n}\n\n.message-item.outgoing {\n  align-self: flex-end;\n}\n\n.message-bubble {\n  padding: 8px 12px;\n  border-radius: 8px;\n  position: relative;\n  margin-bottom: 4px;\n}\n\n.message-item.incoming .message-bubble {\n  background-color: #ffffff;\n  border-top-left-radius: 0;\n}\n\n.message-item.outgoing .message-bubble {\n  background-color: #dcf8c6;\n  border-top-right-radius: 0;\n}\n\n.message-content {\n  margin-bottom: 4px;\n}\n\n.message-meta {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #667781;\n}\n\n.platform-badge {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.message-time {\n  font-size: 0.7rem;\n  color: #667781;\n}\n\n.header-actions {\n  display: flex;\n  gap: 8px;\n  position: relative;\n}\n\n.settings-button {\n  background: none;\n  border: none;\n  padding: 8px;\n  cursor: pointer;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s;\n  font-size: 1.5rem;\n  line-height: 1;\n  color: #666;\n}\n\n.settings-button:hover {\n  background-color: #f5f5f5;\n}\n\n.settings-button span {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n`;\n\nexport const ConversationView: React.FC<ConversationViewProps> = ({ conversation }) => {\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isVoiceCommand, setIsVoiceCommand] = useState(false);\n  const [messageText, setMessageText] = useState('');\n  const [recordedAudio, setRecordedAudio] = useState<{ blob: Blob; url: string } | null>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const speechRecognitionRef = useRef<SpeechRecognition | null>(null);\n  const [showSettings, setShowSettings] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n\n  useEffect(() => {\n    // Initialize speech recognition\n    if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {\n      const SpeechRecognitionAPI = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (SpeechRecognitionAPI) {\n        speechRecognitionRef.current = new SpeechRecognitionAPI();\n        speechRecognitionRef.current.continuous = true;\n        speechRecognitionRef.current.interimResults = true;\n\n        speechRecognitionRef.current.onresult = (event: SpeechRecognitionEvent) => {\n          const results = Array.from(event.results);\n          const transcript = results\n            .map(result => result[0].transcript)\n            .join('');\n\n          if (event.results[0].isFinal) {\n            handleVoiceCommand(transcript.toLowerCase());\n          }\n        };\n\n        speechRecognitionRef.current.onerror = (event: SpeechRecognitionError) => {\n          console.error('Speech recognition error:', event.error);\n          setIsVoiceCommand(false);\n        };\n      }\n    }\n  }, []);\n\n  const handleVoiceCommand = (command: string) => {\n    // Enhanced voice command handling\n    if (command.includes('tag') || command.includes('label')) {\n      const tag = command.split(/tag|label/).pop()?.trim();\n      if (tag) {\n        addContextualTag(tag);\n      }\n    } else if (command.includes('priority')) {\n      const level = command.toLowerCase().includes('high') ? 'High' :\n                   command.toLowerCase().includes('medium') ? 'Medium' : 'Low';\n      updatePriority(level);\n    } else if (command.includes('summarize')) {\n      generateDailySummary();\n    } else if (command.includes('suggest reply')) {\n      generateAIReply();\n    } else if (command.includes('matrix room')) {\n      handleMatrixRoom(command);\n    } else {\n      // Default to message text\n      setMessageText(command);\n    }\n    setIsVoiceCommand(false);\n  };\n\n  const addContextualTag = (tag: string) => {\n    // Implementation for adding contextual tags\n    if (conversation) {\n      const updatedTags = [...conversation.contextualTags, tag];\n      // Update conversation tags\n      console.log('Added tag:', tag);\n    }\n  };\n\n  const updatePriority = (level: PriorityLevel) => {\n    // Implementation for updating priority\n    if (conversation) {\n      console.log('Updated priority to:', level);\n    }\n  };\n\n  const generateDailySummary = async () => {\n    // Implementation for generating daily summary\n    if (conversation?.messages) {\n      // Group messages by date and generate summary\n      console.log('Generating daily summary...');\n    }\n  };\n\n  const generateAIReply = async () => {\n    // Implementation for AI-generated replies\n    if (conversation?.lastMessage) {\n      // Generate AI reply based on context\n      console.log('Generating AI reply...');\n    }\n  };\n\n  const handleMatrixRoom = (command: string) => {\n    // Implementation for Matrix.org room management\n    console.log('Handling Matrix room command:', command);\n  };\n\n  const startVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      setIsVoiceCommand(true);\n      speechRecognitionRef.current.start();\n    } else {\n      alert('Speech recognition is not supported in your browser');\n    }\n  };\n\n  const stopVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      speechRecognitionRef.current.stop();\n      setIsVoiceCommand(false);\n    }\n  };\n\n  const handleSendMessage = () => {\n    if (recordedAudio) {\n      // Handle voice message\n      console.log('Sending voice message:', recordedAudio.blob);\n      setRecordedAudio(null);\n    } else if (messageText.trim()) {\n      // Create new message object\n      const newMessage = {\n        id: Date.now().toString(),\n        text: messageText,\n        sender: 'user' as const,\n        timestamp: new Date(),\n        platform: conversation?.platforms[0] || 'WhatsApp'\n      };\n\n      // Add message to history\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n\n      // Update conversation content\n      if (conversation?.platformMessages) {\n        const newPlatformMessage = {\n          platform: conversation.platforms[0],\n          messages: [messageText],\n          isFromSender: true,\n          lastActivity: new Date()\n        };\n\n        conversation.platformMessages.push(newPlatformMessage);\n      }\n\n      // Clear input\n      setMessageText('');\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setRecordedAudio({ blob: audioBlob, url: audioUrl });\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n      alert('Unable to access microphone. Please check permissions.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n    }\n  };\n\n  const handleVoiceButtonClick = () => {\n    if (isRecording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n\n  const handleSettingsClick = (action: string) => {\n    switch (action) {\n      case 'search':\n        const searchText = prompt('Enter text to search in chat:');\n        if (searchText) {\n          alert(`Searching for: ${searchText}`);\n        }\n        break;\n      case 'media':\n        alert('Opening media gallery');\n        break;\n      case 'clear':\n        if (window.confirm('Are you sure you want to clear this chat?')) {\n          alert('Chat cleared');\n        }\n        break;\n      case 'block':\n        if (window.confirm('Are you sure you want to block this contact?')) {\n          alert('Contact blocked');\n        }\n        break;\n      case 'export':\n        alert('Exporting chat...');\n        break;\n      case 'mute':\n        alert('Notifications muted');\n        break;\n    }\n    setIsSettingsOpen(false);\n  };\n\n  const handleAIReplySelect = (reply: string) => {\n    setMessageText(reply); // This will update the message input\n  };\n\n  if (!conversation) {\n    return (\n      <div className=\"conversation-placeholder\">\n        Select a conversation to start messaging\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"conversation-view\">\n      <div className=\"conversation-header\">\n        <div className=\"header-left\">\n          <h2>{conversation.contact.name}</h2>\n          <div className=\"platform-badges\">\n            {conversation.platforms.map(platform => (\n              <span \n                key={platform} \n                className=\"platform-badge\"\n                data-platform={platform}\n              >\n                {platform}\n              </span>\n            ))}\n          </div>\n        </div>\n        <div className=\"header-actions\">\n          <button \n            className=\"settings-button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowSettings(!showSettings);\n            }}\n          >\n            <span role=\"img\" aria-label=\"settings\">‚ãÆ</span>\n          </button>\n          {showSettings && (\n            <ConversationSettings onClose={() => setShowSettings(false)} />\n          )}\n        </div>\n      </div>\n      \n      <div className=\"conversation-content\">\n        <div className=\"message-history\">\n          {conversation?.platformMessages\n            ?.sort((a, b) => a.lastActivity.getTime() - b.lastActivity.getTime())\n            .map((msg, index) => (\n              <div \n                key={`${msg.platform}-${index}`}\n                className={`message-item ${msg.isFromSender ? 'outgoing' : 'incoming'}`}\n              >\n                <div className=\"message-bubble\">\n                  {msg.messages.map((text, msgIndex) => (\n                    <div key={msgIndex} className=\"message-content\">\n                      {text}\n                    </div>\n                  ))}\n                  <div className=\"message-meta\">\n                    <span className=\"message-time\">\n                      {msg.lastActivity.toLocaleTimeString([], { \n                        hour: '2-digit',\n                        minute: '2-digit',\n                        hour12: true\n                      })}\n                    </span>\n                    <span \n                      className=\"platform-badge\"\n                      data-platform={msg.platform}\n                    >\n                      {msg.platform}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n\n          {messages.map(message => (\n            <div \n              key={message.id}\n              className=\"message-item outgoing\"\n            >\n              <div className=\"message-bubble\">\n                <div className=\"message-content\">\n                  {message.text}\n                </div>\n                <div className=\"message-meta\">\n                  <span className=\"message-time\">\n                    {message.timestamp.toLocaleTimeString([], { \n                      hour: '2-digit',\n                      minute: '2-digit',\n                      hour12: true \n                    })}\n                  </span>\n                  <span \n                    className=\"platform-badge\"\n                    data-platform={message.platform}\n                  >\n                    {message.platform}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <AIFeatures \n        conversation={conversation} \n        onReplySelect={handleAIReplySelect}\n      />\n\n      <div className=\"message-input-container\">\n        {recordedAudio ? (\n          <div className=\"recorded-audio\">\n            <audio src={recordedAudio.url} controls />\n            <button \n              className=\"cancel-audio\"\n              onClick={() => setRecordedAudio(null)}\n              title=\"Cancel\"\n            >\n              ‚ùå\n            </button>\n          </div>\n        ) : (\n          <>\n            <input \n              type=\"text\" \n              className={`message-input ${isVoiceCommand ? 'voice-active' : ''}`}\n              placeholder={isVoiceCommand ? 'Listening for voice command...' : 'Type a message or use voice command...'}\n              value={messageText}\n              onChange={(e) => setMessageText(e.target.value)}\n              onKeyPress={handleKeyPress}\n            />\n            <button \n              className={`voice-command-button ${isVoiceCommand ? 'active' : ''}`}\n              title={isVoiceCommand ? 'Stop Voice Command' : 'Start Voice Command'}\n              onClick={() => isVoiceCommand ? stopVoiceCommand() : startVoiceCommand()}\n            >\n              <span role=\"img\" aria-label=\"voice-command\">\n                {isVoiceCommand ? 'üéôÔ∏è' : 'üó£Ô∏è'}\n              </span>\n            </button>\n          </>\n        )}\n        <button \n          className={`voice-button ${isRecording ? 'recording' : ''}`}\n          title={isRecording ? 'Stop Recording' : 'Start Voice Recording'}\n          onClick={handleVoiceButtonClick}\n        >\n          <span role=\"img\" aria-label=\"voice\">\n            {isRecording ? '‚èπÔ∏è' : 'üé§'}\n          </span>\n        </button>\n        <button \n          className={`send-button ${(messageText.trim() || recordedAudio) ? 'active' : ''}`}\n          onClick={handleSendMessage}\n          disabled={!messageText.trim() && !recordedAudio}\n        >\n          <span role=\"img\" aria-label=\"send\">üì§</span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Helper function to generate AI replies (mock implementation)\nconst generateAIReplies = async (messages: any[]): Promise<string[]> => {\n  // In a real implementation, this would call your AI service\n  const commonReplies = [\n    \"I'll look into this and get back to you shortly\",\n    \"Thanks for bringing this to my attention\",\n    \"Could you clarify your requirements?\",\n    \"Let me check with the team and update you\",\n    \"I understand, I'll prioritize this task\",\n    \"Would you like to schedule a call to discuss this?\",\n  ];\n  \n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  \n  // Return 3 random replies\n  return commonReplies\n    .sort(() => Math.random() - 0.5)\n    .slice(0, 3);\n}; "],"mappings":"AAAA,MAAO,GAAK,CAAAA,KAAK,KAAM,OAAO,CAC9B,OAASC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CACnD,OAASC,UAAU,KAAQ,eAAe,CAE1C,OAASC,oBAAoB,KAAQ,yBAAyB,CAE9D;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBA6DA;AACA,KAAM,CAAAC,MAAM,ykDAkGX,CAED,MAAO,MAAM,CAAAC,gBAAiD,CAAGC,IAAA,EAAsB,KAAAC,qBAAA,IAArB,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAChF,KAAM,CAACG,cAAc,CAAEC,iBAAiB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACoB,cAAc,CAAEC,iBAAiB,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACsB,WAAW,CAAEC,cAAc,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACwB,aAAa,CAAEC,gBAAgB,CAAC,CAAGzB,QAAQ,CAAqC,IAAI,CAAC,CAC5F,KAAM,CAAA0B,gBAAgB,CAAGzB,MAAM,CAAuB,IAAI,CAAC,CAC3D,KAAM,CAAA0B,cAAc,CAAG1B,MAAM,CAAS,EAAE,CAAC,CACzC,KAAM,CAAA2B,oBAAoB,CAAG3B,MAAM,CAA2B,IAAI,CAAC,CACnE,KAAM,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAC+B,QAAQ,CAAEC,WAAW,CAAC,CAAGhC,QAAQ,CAAY,EAAE,CAAC,CAEvDE,SAAS,CAAC,IAAM,CACd;AACA,GAAI,mBAAmB,EAAI,CAAA+B,MAAM,EAAI,yBAAyB,EAAI,CAAAA,MAAM,CAAE,CACxE,KAAM,CAAAC,oBAAoB,CAAGD,MAAM,CAACE,iBAAiB,EAAIF,MAAM,CAACG,uBAAuB,CACvF,GAAIF,oBAAoB,CAAE,CACxBN,oBAAoB,CAACS,OAAO,CAAG,GAAI,CAAAH,oBAAoB,CAAC,CAAC,CACzDN,oBAAoB,CAACS,OAAO,CAACC,UAAU,CAAG,IAAI,CAC9CV,oBAAoB,CAACS,OAAO,CAACE,cAAc,CAAG,IAAI,CAElDX,oBAAoB,CAACS,OAAO,CAACG,QAAQ,CAAIC,KAA6B,EAAK,CACzE,KAAM,CAAAC,OAAO,CAAGC,KAAK,CAACC,IAAI,CAACH,KAAK,CAACC,OAAO,CAAC,CACzC,KAAM,CAAAG,UAAU,CAAGH,OAAO,CACvBI,GAAG,CAACC,MAAM,EAAIA,MAAM,CAAC,CAAC,CAAC,CAACF,UAAU,CAAC,CACnCG,IAAI,CAAC,EAAE,CAAC,CAEX,GAAIP,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAACO,OAAO,CAAE,CAC5BC,kBAAkB,CAACL,UAAU,CAACM,WAAW,CAAC,CAAC,CAAC,CAC9C,CACF,CAAC,CAEDvB,oBAAoB,CAACS,OAAO,CAACe,OAAO,CAAIX,KAA6B,EAAK,CACxEY,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAEb,KAAK,CAACa,KAAK,CAAC,CACvDjC,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CACH,CACF,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAA6B,kBAAkB,CAAIK,OAAe,EAAK,CAC9C;AACA,GAAIA,OAAO,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAID,OAAO,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAE,KAAAC,kBAAA,CACxD,KAAM,CAAAC,GAAG,EAAAD,kBAAA,CAAGF,OAAO,CAACI,KAAK,CAAC,WAAW,CAAC,CAACC,GAAG,CAAC,CAAC,UAAAH,kBAAA,iBAAhCA,kBAAA,CAAkCI,IAAI,CAAC,CAAC,CACpD,GAAIH,GAAG,CAAE,CACPI,gBAAgB,CAACJ,GAAG,CAAC,CACvB,CACF,CAAC,IAAM,IAAIH,OAAO,CAACC,QAAQ,CAAC,UAAU,CAAC,CAAE,CACvC,KAAM,CAAAO,KAAK,CAAGR,OAAO,CAACJ,WAAW,CAAC,CAAC,CAACK,QAAQ,CAAC,MAAM,CAAC,CAAG,MAAM,CAChDD,OAAO,CAACJ,WAAW,CAAC,CAAC,CAACK,QAAQ,CAAC,QAAQ,CAAC,CAAG,QAAQ,CAAG,KAAK,CACxEQ,cAAc,CAACD,KAAK,CAAC,CACvB,CAAC,IAAM,IAAIR,OAAO,CAACC,QAAQ,CAAC,WAAW,CAAC,CAAE,CACxCS,oBAAoB,CAAC,CAAC,CACxB,CAAC,IAAM,IAAIV,OAAO,CAACC,QAAQ,CAAC,eAAe,CAAC,CAAE,CAC5CU,eAAe,CAAC,CAAC,CACnB,CAAC,IAAM,IAAIX,OAAO,CAACC,QAAQ,CAAC,aAAa,CAAC,CAAE,CAC1CW,gBAAgB,CAACZ,OAAO,CAAC,CAC3B,CAAC,IAAM,CACL;AACAhC,cAAc,CAACgC,OAAO,CAAC,CACzB,CACAlC,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAyC,gBAAgB,CAAIJ,GAAW,EAAK,CACxC;AACA,GAAI3C,YAAY,CAAE,CAChB,KAAM,CAAAqD,WAAW,CAAG,CAAC,GAAGrD,YAAY,CAACsD,cAAc,CAAEX,GAAG,CAAC,CACzD;AACAL,OAAO,CAACiB,GAAG,CAAC,YAAY,CAAEZ,GAAG,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAM,cAAc,CAAID,KAAoB,EAAK,CAC/C;AACA,GAAIhD,YAAY,CAAE,CAChBsC,OAAO,CAACiB,GAAG,CAAC,sBAAsB,CAAEP,KAAK,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAE,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC;AACA,GAAIlD,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEgB,QAAQ,CAAE,CAC1B;AACAsB,OAAO,CAACiB,GAAG,CAAC,6BAA6B,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAJ,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC;AACA,GAAInD,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEwD,WAAW,CAAE,CAC7B;AACAlB,OAAO,CAACiB,GAAG,CAAC,wBAAwB,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAH,gBAAgB,CAAIZ,OAAe,EAAK,CAC5C;AACAF,OAAO,CAACiB,GAAG,CAAC,+BAA+B,CAAEf,OAAO,CAAC,CACvD,CAAC,CAED,KAAM,CAAAiB,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAI5C,oBAAoB,CAACS,OAAO,CAAE,CAChChB,iBAAiB,CAAC,IAAI,CAAC,CACvBO,oBAAoB,CAACS,OAAO,CAACoC,KAAK,CAAC,CAAC,CACtC,CAAC,IAAM,CACLC,KAAK,CAAC,qDAAqD,CAAC,CAC9D,CACF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI/C,oBAAoB,CAACS,OAAO,CAAE,CAChCT,oBAAoB,CAACS,OAAO,CAACuC,IAAI,CAAC,CAAC,CACnCvD,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAAwD,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAIrD,aAAa,CAAE,CACjB;AACA6B,OAAO,CAACiB,GAAG,CAAC,wBAAwB,CAAE9C,aAAa,CAACsD,IAAI,CAAC,CACzDrD,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,IAAM,IAAIH,WAAW,CAACuC,IAAI,CAAC,CAAC,CAAE,CAC7B;AACA,KAAM,CAAAkB,UAAU,CAAG,CACjBC,EAAE,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBC,IAAI,CAAE9D,WAAW,CACjB+D,MAAM,CAAE,MAAe,CACvBC,SAAS,CAAE,GAAI,CAAAL,IAAI,CAAC,CAAC,CACrBM,QAAQ,CAAE,CAAAxE,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEyE,SAAS,CAAC,CAAC,CAAC,GAAI,UAC1C,CAAC,CAED;AACAxD,WAAW,CAACyD,YAAY,EAAI,CAAC,GAAGA,YAAY,CAAEV,UAAU,CAAC,CAAC,CAE1D;AACA,GAAIhE,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAE2E,gBAAgB,CAAE,CAClC,KAAM,CAAAC,kBAAkB,CAAG,CACzBJ,QAAQ,CAAExE,YAAY,CAACyE,SAAS,CAAC,CAAC,CAAC,CACnCzD,QAAQ,CAAE,CAACT,WAAW,CAAC,CACvBsE,YAAY,CAAE,IAAI,CAClBC,YAAY,CAAE,GAAI,CAAAZ,IAAI,CAAC,CACzB,CAAC,CAEDlE,YAAY,CAAC2E,gBAAgB,CAACI,IAAI,CAACH,kBAAkB,CAAC,CACxD,CAEA;AACApE,cAAc,CAAC,EAAE,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAwE,cAAc,CAAIC,CAAwC,EAAK,CACnE,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,EAAI,CAACD,CAAC,CAACE,QAAQ,CAAE,CACpCF,CAAC,CAACG,cAAc,CAAC,CAAC,CAClBtB,iBAAiB,CAAC,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAuB,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CACzE,KAAM,CAAAC,aAAa,CAAG,GAAI,CAAAC,aAAa,CAACN,MAAM,CAAC,CAC/C3E,gBAAgB,CAACW,OAAO,CAAGqE,aAAa,CACxC/E,cAAc,CAACU,OAAO,CAAG,EAAE,CAE3BqE,aAAa,CAACE,eAAe,CAAInE,KAAK,EAAK,CACzC,GAAIA,KAAK,CAACoE,IAAI,CAACC,IAAI,CAAG,CAAC,CAAE,CACvBnF,cAAc,CAACU,OAAO,CAACyD,IAAI,CAACrD,KAAK,CAACoE,IAAI,CAAC,CACzC,CACF,CAAC,CAEDH,aAAa,CAACK,MAAM,CAAG,IAAM,CAC3B,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,IAAI,CAACtF,cAAc,CAACU,OAAO,CAAE,CAAE6E,IAAI,CAAE,WAAY,CAAC,CAAC,CACzE,KAAM,CAAAC,QAAQ,CAAGC,GAAG,CAACC,eAAe,CAACL,SAAS,CAAC,CAC/CvF,gBAAgB,CAAC,CAAEqD,IAAI,CAAEkC,SAAS,CAAEM,GAAG,CAAEH,QAAS,CAAC,CAAC,CACtD,CAAC,CAEDT,aAAa,CAACjC,KAAK,CAAC,CAAC,CACrBtD,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,MAAOmC,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDoB,KAAK,CAAC,wDAAwD,CAAC,CACjE,CACF,CAAC,CAED,KAAM,CAAA6C,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI7F,gBAAgB,CAACW,OAAO,EAAInB,WAAW,CAAE,CAC3CQ,gBAAgB,CAACW,OAAO,CAACuC,IAAI,CAAC,CAAC,CAC/BlD,gBAAgB,CAACW,OAAO,CAACgE,MAAM,CAACmB,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,EAAIA,KAAK,CAAC9C,IAAI,CAAC,CAAC,CAAC,CAC1EzD,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAwG,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAIzG,WAAW,CAAE,CACfqG,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLnB,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAAwB,mBAAmB,CAAIC,MAAc,EAAK,CAC9C,OAAQA,MAAM,EACZ,IAAK,QAAQ,CACX,KAAM,CAAAC,UAAU,CAAGC,MAAM,CAAC,+BAA+B,CAAC,CAC1D,GAAID,UAAU,CAAE,CACdpD,KAAK,mBAAAsD,MAAA,CAAmBF,UAAU,CAAE,CAAC,CACvC,CACA,MACF,IAAK,OAAO,CACVpD,KAAK,CAAC,uBAAuB,CAAC,CAC9B,MACF,IAAK,OAAO,CACV,GAAIzC,MAAM,CAACgG,OAAO,CAAC,2CAA2C,CAAC,CAAE,CAC/DvD,KAAK,CAAC,cAAc,CAAC,CACvB,CACA,MACF,IAAK,OAAO,CACV,GAAIzC,MAAM,CAACgG,OAAO,CAAC,8CAA8C,CAAC,CAAE,CAClEvD,KAAK,CAAC,iBAAiB,CAAC,CAC1B,CACA,MACF,IAAK,QAAQ,CACXA,KAAK,CAAC,mBAAmB,CAAC,CAC1B,MACF,IAAK,MAAM,CACTA,KAAK,CAAC,qBAAqB,CAAC,CAC5B,MACJ,CACAzD,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAiH,mBAAmB,CAAIC,KAAa,EAAK,CAC7C5G,cAAc,CAAC4G,KAAK,CAAC,CAAE;AACzB,CAAC,CAED,GAAI,CAACpH,YAAY,CAAE,CACjB,mBACET,IAAA,QAAK8H,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,0CAE1C,CAAK,CAAC,CAEV,CAEA,mBACE7H,KAAA,QAAK4H,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC7H,KAAA,QAAK4H,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClC7H,KAAA,QAAK4H,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B/H,IAAA,OAAA+H,QAAA,CAAKtH,YAAY,CAACuH,OAAO,CAACC,IAAI,CAAK,CAAC,cACpCjI,IAAA,QAAK8H,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC7BtH,YAAY,CAACyE,SAAS,CAAC1C,GAAG,CAACyC,QAAQ,eAClCjF,IAAA,SAEE8H,SAAS,CAAC,gBAAgB,CAC1B,gBAAe7C,QAAS,CAAA8C,QAAA,CAEvB9C,QAAQ,EAJJA,QAKD,CACP,CAAC,CACC,CAAC,EACH,CAAC,cACN/E,KAAA,QAAK4H,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/H,IAAA,WACE8H,SAAS,CAAC,iBAAiB,CAC3BI,OAAO,CAAGxC,CAAC,EAAK,CACdA,CAAC,CAACyC,eAAe,CAAC,CAAC,CACnB3G,eAAe,CAAC,CAACD,YAAY,CAAC,CAChC,CAAE,CAAAwG,QAAA,cAEF/H,IAAA,SAAMoI,IAAI,CAAC,KAAK,CAAC,aAAW,UAAU,CAAAL,QAAA,CAAC,QAAC,CAAM,CAAC,CACzC,CAAC,CACRxG,YAAY,eACXvB,IAAA,CAACF,oBAAoB,EAACuI,OAAO,CAAEA,CAAA,GAAM7G,eAAe,CAAC,KAAK,CAAE,CAAE,CAC/D,EACE,CAAC,EACH,CAAC,cAENxB,IAAA,QAAK8H,SAAS,CAAC,sBAAsB,CAAAC,QAAA,cACnC7H,KAAA,QAAK4H,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7BtH,YAAY,SAAZA,YAAY,kBAAAD,qBAAA,CAAZC,YAAY,CAAE2E,gBAAgB,UAAA5E,qBAAA,iBAA9BA,qBAAA,CACG8H,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAAChD,YAAY,CAACkD,OAAO,CAAC,CAAC,CAAGD,CAAC,CAACjD,YAAY,CAACkD,OAAO,CAAC,CAAC,CAAC,CACpEjG,GAAG,CAAC,CAACkG,GAAG,CAAEC,KAAK,gBACd3I,IAAA,QAEE8H,SAAS,iBAAAJ,MAAA,CAAkBgB,GAAG,CAACpD,YAAY,CAAG,UAAU,CAAG,UAAU,CAAG,CAAAyC,QAAA,cAExE7H,KAAA,QAAK4H,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5BW,GAAG,CAACjH,QAAQ,CAACe,GAAG,CAAC,CAACsC,IAAI,CAAE8D,QAAQ,gBAC/B5I,IAAA,QAAoB8H,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC5CjD,IAAI,EADG8D,QAEL,CACN,CAAC,cACF1I,KAAA,QAAK4H,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B/H,IAAA,SAAM8H,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC3BW,GAAG,CAACnD,YAAY,CAACsD,kBAAkB,CAAC,EAAE,CAAE,CACvCC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,CACE,CAAC,cACPhJ,IAAA,SACE8H,SAAS,CAAC,gBAAgB,CAC1B,gBAAeY,GAAG,CAACzD,QAAS,CAAA8C,QAAA,CAE3BW,GAAG,CAACzD,QAAQ,CACT,CAAC,EACJ,CAAC,EACH,CAAC,KAAAyC,MAAA,CAxBEgB,GAAG,CAACzD,QAAQ,MAAAyC,MAAA,CAAIiB,KAAK,CAyB1B,CACN,CAAC,CAEHlH,QAAQ,CAACe,GAAG,CAACyG,OAAO,eACnBjJ,IAAA,QAEE8H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cAEjC7H,KAAA,QAAK4H,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/H,IAAA,QAAK8H,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC7BkB,OAAO,CAACnE,IAAI,CACV,CAAC,cACN5E,KAAA,QAAK4H,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B/H,IAAA,SAAM8H,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC3BkB,OAAO,CAACjE,SAAS,CAAC6D,kBAAkB,CAAC,EAAE,CAAE,CACxCC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,CACE,CAAC,cACPhJ,IAAA,SACE8H,SAAS,CAAC,gBAAgB,CAC1B,gBAAemB,OAAO,CAAChE,QAAS,CAAA8C,QAAA,CAE/BkB,OAAO,CAAChE,QAAQ,CACb,CAAC,EACJ,CAAC,EACH,CAAC,EAtBDgE,OAAO,CAACvE,EAuBV,CACN,CAAC,EACC,CAAC,CACH,CAAC,cAEN1E,IAAA,CAACH,UAAU,EACTY,YAAY,CAAEA,YAAa,CAC3ByI,aAAa,CAAEtB,mBAAoB,CACpC,CAAC,cAEF1H,KAAA,QAAK4H,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EACrC7G,aAAa,cACZhB,KAAA,QAAK4H,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/H,IAAA,UAAOmJ,GAAG,CAAEjI,aAAa,CAAC8F,GAAI,CAACoC,QAAQ,MAAE,CAAC,cAC1CpJ,IAAA,WACE8H,SAAS,CAAC,cAAc,CACxBI,OAAO,CAAEA,CAAA,GAAM/G,gBAAgB,CAAC,IAAI,CAAE,CACtCkI,KAAK,CAAC,QAAQ,CAAAtB,QAAA,CACf,QAED,CAAQ,CAAC,EACN,CAAC,cAEN7H,KAAA,CAAAE,SAAA,EAAA2H,QAAA,eACE/H,IAAA,UACE4G,IAAI,CAAC,MAAM,CACXkB,SAAS,kBAAAJ,MAAA,CAAmB5G,cAAc,CAAG,cAAc,CAAG,EAAE,CAAG,CACnEwI,WAAW,CAAExI,cAAc,CAAG,gCAAgC,CAAG,wCAAyC,CAC1GyI,KAAK,CAAEvI,WAAY,CACnBwI,QAAQ,CAAG9D,CAAC,EAAKzE,cAAc,CAACyE,CAAC,CAAC+D,MAAM,CAACF,KAAK,CAAE,CAChDG,UAAU,CAAEjE,cAAe,CAC5B,CAAC,cACFzF,IAAA,WACE8H,SAAS,yBAAAJ,MAAA,CAA0B5G,cAAc,CAAG,QAAQ,CAAG,EAAE,CAAG,CACpEuI,KAAK,CAAEvI,cAAc,CAAG,oBAAoB,CAAG,qBAAsB,CACrEoH,OAAO,CAAEA,CAAA,GAAMpH,cAAc,CAAGuD,gBAAgB,CAAC,CAAC,CAAGH,iBAAiB,CAAC,CAAE,CAAA6D,QAAA,cAEzE/H,IAAA,SAAMoI,IAAI,CAAC,KAAK,CAAC,aAAW,eAAe,CAAAL,QAAA,CACxCjH,cAAc,CAAG,KAAK,CAAG,KAAK,CAC3B,CAAC,CACD,CAAC,EACT,CACH,cACDd,IAAA,WACE8H,SAAS,iBAAAJ,MAAA,CAAkB9G,WAAW,CAAG,WAAW,CAAG,EAAE,CAAG,CAC5DyI,KAAK,CAAEzI,WAAW,CAAG,gBAAgB,CAAG,uBAAwB,CAChEsH,OAAO,CAAEb,sBAAuB,CAAAU,QAAA,cAEhC/H,IAAA,SAAMoI,IAAI,CAAC,KAAK,CAAC,aAAW,OAAO,CAAAL,QAAA,CAChCnH,WAAW,CAAG,IAAI,CAAG,IAAI,CACtB,CAAC,CACD,CAAC,cACTZ,IAAA,WACE8H,SAAS,gBAAAJ,MAAA,CAAkB1G,WAAW,CAACuC,IAAI,CAAC,CAAC,EAAIrC,aAAa,CAAI,QAAQ,CAAG,EAAE,CAAG,CAClFgH,OAAO,CAAE3D,iBAAkB,CAC3BoF,QAAQ,CAAE,CAAC3I,WAAW,CAACuC,IAAI,CAAC,CAAC,EAAI,CAACrC,aAAc,CAAA6G,QAAA,cAEhD/H,IAAA,SAAMoI,IAAI,CAAC,KAAK,CAAC,aAAW,MAAM,CAAAL,QAAA,CAAC,cAAE,CAAM,CAAC,CACtC,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAA6B,iBAAiB,CAAG,KAAO,CAAAnI,QAAe,EAAwB,CACtE;AACA,KAAM,CAAAoI,aAAa,CAAG,CACpB,iDAAiD,CACjD,0CAA0C,CAC1C,sCAAsC,CACtC,2CAA2C,CAC3C,yCAAyC,CACzC,oDAAoD,CACrD,CAED;AACA,KAAM,IAAI,CAAAC,OAAO,CAACC,OAAO,EAAIC,UAAU,CAACD,OAAO,CAAE,IAAI,CAAC,CAAC,CAEvD;AACA,MAAO,CAAAF,aAAa,CACjBvB,IAAI,CAAC,IAAM2B,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAC/BC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}