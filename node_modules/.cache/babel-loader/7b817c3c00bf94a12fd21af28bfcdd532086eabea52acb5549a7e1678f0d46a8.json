{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swamy.LAPTOP-0RVCTRRS\\\\OneDrive\\\\Desktop\\\\Dailyfix Nexus\\\\src\\\\components\\\\ConversationView\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { AIFeatures } from '../AIFeatures';\nimport { ConversationSettings } from '../ConversationSettings';\n\n// Add type definitions for Web Speech API\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Update the styles by removing date-related CSS\nconst styles = `\n.conversation-content {\n  padding: 16px;\n  background-color: #e5ddd5;\n  height: calc(100vh - 180px);\n  overflow-y: auto;\n}\n\n.message-history {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.message-item {\n  display: flex;\n  flex-direction: column;\n  max-width: 70%;\n}\n\n.message-item.incoming {\n  align-self: flex-start;\n}\n\n.message-item.outgoing {\n  align-self: flex-end;\n}\n\n.message-bubble {\n  padding: 8px 12px;\n  border-radius: 8px;\n  position: relative;\n  margin-bottom: 4px;\n}\n\n.message-item.incoming .message-bubble {\n  background-color: #ffffff;\n  border-top-left-radius: 0;\n}\n\n.message-item.outgoing .message-bubble {\n  background-color: #dcf8c6;\n  border-top-right-radius: 0;\n}\n\n.message-content {\n  margin-bottom: 4px;\n}\n\n.message-meta {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #667781;\n}\n\n.platform-badge {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.message-time {\n  font-size: 0.7rem;\n  color: #667781;\n}\n\n.header-actions {\n  display: flex;\n  gap: 8px;\n  position: relative;\n}\n\n.settings-button {\n  background: none;\n  border: none;\n  padding: 8px;\n  cursor: pointer;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s;\n  font-size: 1.5rem;\n  line-height: 1;\n  color: #666;\n}\n\n.settings-button:hover {\n  background-color: #f5f5f5;\n}\n\n.settings-button span {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n`;\nexport const ConversationView = ({\n  conversation\n}) => {\n  _s();\n  var _conversation$platfor;\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isVoiceCommand, setIsVoiceCommand] = useState(false);\n  const [messageText, setMessageText] = useState('');\n  const [recordedAudio, setRecordedAudio] = useState(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const speechRecognitionRef = useRef(null);\n  const [showSettings, setShowSettings] = useState(false);\n  useEffect(() => {\n    // Initialize speech recognition\n    if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {\n      const SpeechRecognitionAPI = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (SpeechRecognitionAPI) {\n        speechRecognitionRef.current = new SpeechRecognitionAPI();\n        speechRecognitionRef.current.continuous = true;\n        speechRecognitionRef.current.interimResults = true;\n        speechRecognitionRef.current.onresult = event => {\n          const results = Array.from(event.results);\n          const transcript = results.map(result => result[0].transcript).join('');\n          if (event.results[0].isFinal) {\n            handleVoiceCommand(transcript.toLowerCase());\n          }\n        };\n        speechRecognitionRef.current.onerror = event => {\n          console.error('Speech recognition error:', event.error);\n          setIsVoiceCommand(false);\n        };\n      }\n    }\n  }, []);\n  const handleVoiceCommand = command => {\n    // Enhanced voice command handling\n    if (command.includes('tag') || command.includes('label')) {\n      var _command$split$pop;\n      const tag = (_command$split$pop = command.split(/tag|label/).pop()) === null || _command$split$pop === void 0 ? void 0 : _command$split$pop.trim();\n      if (tag) {\n        addContextualTag(tag);\n      }\n    } else if (command.includes('priority')) {\n      const level = command.toLowerCase().includes('high') ? 'High' : command.toLowerCase().includes('medium') ? 'Medium' : 'Low';\n      updatePriority(level);\n    } else if (command.includes('summarize')) {\n      generateDailySummary();\n    } else if (command.includes('suggest reply')) {\n      generateAIReply();\n    } else if (command.includes('matrix room')) {\n      handleMatrixRoom(command);\n    } else {\n      // Default to message text\n      setMessageText(command);\n    }\n    setIsVoiceCommand(false);\n  };\n  const addContextualTag = tag => {\n    // Implementation for adding contextual tags\n    if (conversation) {\n      const updatedTags = [...conversation.contextualTags, tag];\n      // Update conversation tags\n      console.log('Added tag:', tag);\n    }\n  };\n  const updatePriority = level => {\n    // Implementation for updating priority\n    if (conversation) {\n      console.log('Updated priority to:', level);\n    }\n  };\n  const generateDailySummary = async () => {\n    // Implementation for generating daily summary\n    if (conversation !== null && conversation !== void 0 && conversation.messages) {\n      // Group messages by date and generate summary\n      console.log('Generating daily summary...');\n    }\n  };\n  const generateAIReply = async () => {\n    // Implementation for AI-generated replies\n    if (conversation !== null && conversation !== void 0 && conversation.lastMessage) {\n      // Generate AI reply based on context\n      console.log('Generating AI reply...');\n    }\n  };\n  const handleMatrixRoom = command => {\n    // Implementation for Matrix.org room management\n    console.log('Handling Matrix room command:', command);\n  };\n  const startVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      setIsVoiceCommand(true);\n      speechRecognitionRef.current.start();\n    } else {\n      alert('Speech recognition is not supported in your browser');\n    }\n  };\n  const stopVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      speechRecognitionRef.current.stop();\n      setIsVoiceCommand(false);\n    }\n  };\n  const handleSendMessage = () => {\n    if (recordedAudio) {\n      // Send voice message\n      console.log('Sending voice message:', recordedAudio.blob);\n      setRecordedAudio(null);\n    } else if (messageText.trim()) {\n      // Send text message\n      const newMessage = {\n        id: Date.now().toString(),\n        text: messageText,\n        sender: 'user',\n        time: new Date(),\n        platform: (conversation === null || conversation === void 0 ? void 0 : conversation.platforms[0]) || 'WhatsApp'\n      };\n      console.log('Sending text message:', newMessage);\n      setMessageText('');\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/wav'\n        });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setRecordedAudio({\n          blob: audioBlob,\n          url: audioUrl\n        });\n      };\n      mediaRecorder.start();\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n      alert('Unable to access microphone. Please check permissions.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n    }\n  };\n  const handleVoiceButtonClick = () => {\n    if (isRecording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n  const handleSettingsClick = action => {\n    switch (action) {\n      case 'search':\n        const searchText = prompt('Enter text to search in chat:');\n        if (searchText) {\n          alert(`Searching for: ${searchText}`);\n        }\n        break;\n      case 'media':\n        alert('Opening media gallery');\n        break;\n      case 'clear':\n        if (window.confirm('Are you sure you want to clear this chat?')) {\n          alert('Chat cleared');\n        }\n        break;\n      case 'block':\n        if (window.confirm('Are you sure you want to block this contact?')) {\n          alert('Contact blocked');\n        }\n        break;\n      case 'export':\n        alert('Exporting chat...');\n        break;\n      case 'mute':\n        alert('Notifications muted');\n        break;\n    }\n    setIsSettingsOpen(false);\n  };\n  const handleAIReplySelect = reply => {\n    setMessageText(reply); // This will update the message input\n  };\n  if (!conversation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-placeholder\",\n      children: \"Select a conversation to start messaging\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conversation-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: conversation.contact.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"platform-badges\",\n          children: conversation.platforms.map(platform => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"platform-badge\",\n            \"data-platform\": platform,\n            children: platform\n          }, platform, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"settings-button\",\n          onClick: e => {\n            e.stopPropagation();\n            setShowSettings(!showSettings);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"settings\",\n            children: \"\\u22EE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), showSettings && /*#__PURE__*/_jsxDEV(ConversationSettings, {\n          onClose: () => setShowSettings(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-history\",\n        children: conversation === null || conversation === void 0 ? void 0 : (_conversation$platfor = conversation.platformMessages) === null || _conversation$platfor === void 0 ? void 0 : _conversation$platfor.sort((a, b) => a.lastActivity.getTime() - b.lastActivity.getTime()).map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message-item ${msg.isFromSender ? 'outgoing' : 'incoming'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-bubble\",\n            children: [msg.messages.map((text, msgIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: text\n            }, msgIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: msg.lastActivity.toLocaleTimeString([], {\n                  hour: '2-digit',\n                  minute: '2-digit',\n                  hour12: true\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"platform-badge\",\n                \"data-platform\": msg.platform,\n                children: msg.platform\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 17\n          }, this)\n        }, `${msg.platform}-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AIFeatures, {\n      conversation: conversation,\n      onReplySelect: handleAIReplySelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-input-container\",\n      children: [recordedAudio ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recorded-audio\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          src: recordedAudio.url,\n          controls: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-audio\",\n          onClick: () => setRecordedAudio(null),\n          title: \"Cancel\",\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: `message-input ${isVoiceCommand ? 'voice-active' : ''}`,\n          placeholder: isVoiceCommand ? 'Listening for voice command...' : 'Type a message or use voice command...',\n          value: messageText,\n          onChange: e => setMessageText(e.target.value),\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `voice-command-button ${isVoiceCommand ? 'active' : ''}`,\n          title: isVoiceCommand ? 'Stop Voice Command' : 'Start Voice Command',\n          onClick: () => isVoiceCommand ? stopVoiceCommand() : startVoiceCommand(),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"voice-command\",\n            children: isVoiceCommand ? '🎙️' : '🗣️'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `voice-button ${isRecording ? 'recording' : ''}`,\n        title: isRecording ? 'Stop Recording' : 'Start Voice Recording',\n        onClick: handleVoiceButtonClick,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"voice\",\n          children: isRecording ? '⏹️' : '🎤'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `send-button ${messageText.trim() || recordedAudio ? 'active' : ''}`,\n        onClick: handleSendMessage,\n        disabled: !messageText.trim() && !recordedAudio,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"send\",\n          children: \"\\uD83D\\uDCE4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 5\n  }, this);\n};\n\n// Helper function to generate AI replies (mock implementation)\n_s(ConversationView, \"s9Rgr+73GcvAimKrrTo5gcgqqR4=\");\n_c = ConversationView;\nconst generateAIReplies = async messages => {\n  // In a real implementation, this would call your AI service\n  const commonReplies = [\"I'll look into this and get back to you shortly\", \"Thanks for bringing this to my attention\", \"Could you clarify your requirements?\", \"Let me check with the team and update you\", \"I understand, I'll prioritize this task\", \"Would you like to schedule a call to discuss this?\"];\n\n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 1000));\n\n  // Return 3 random replies\n  return commonReplies.sort(() => Math.random() - 0.5).slice(0, 3);\n};\nvar _c;\n$RefreshReg$(_c, \"ConversationView\");","map":{"version":3,"names":["React","useState","useRef","useEffect","AIFeatures","ConversationSettings","jsxDEV","_jsxDEV","Fragment","_Fragment","styles","ConversationView","conversation","_s","_conversation$platfor","isSettingsOpen","setIsSettingsOpen","isRecording","setIsRecording","isVoiceCommand","setIsVoiceCommand","messageText","setMessageText","recordedAudio","setRecordedAudio","mediaRecorderRef","audioChunksRef","speechRecognitionRef","showSettings","setShowSettings","window","SpeechRecognitionAPI","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","onresult","event","results","Array","from","transcript","map","result","join","isFinal","handleVoiceCommand","toLowerCase","onerror","console","error","command","includes","_command$split$pop","tag","split","pop","trim","addContextualTag","level","updatePriority","generateDailySummary","generateAIReply","handleMatrixRoom","updatedTags","contextualTags","log","messages","lastMessage","startVoiceCommand","start","alert","stopVoiceCommand","stop","handleSendMessage","blob","newMessage","id","Date","now","toString","text","sender","time","platform","platforms","handleKeyPress","e","key","shiftKey","preventDefault","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","ondataavailable","data","size","push","onstop","audioBlob","Blob","type","audioUrl","URL","createObjectURL","url","stopRecording","getTracks","forEach","track","handleVoiceButtonClick","handleSettingsClick","action","searchText","prompt","confirm","handleAIReplySelect","reply","className","children","fileName","_jsxFileName","lineNumber","columnNumber","contact","name","onClick","stopPropagation","role","onClose","platformMessages","sort","a","b","lastActivity","getTime","msg","index","isFromSender","msgIndex","toLocaleTimeString","hour","minute","hour12","onReplySelect","src","controls","title","placeholder","value","onChange","target","onKeyPress","disabled","_c","generateAIReplies","commonReplies","Promise","resolve","setTimeout","Math","random","slice","$RefreshReg$"],"sources":["C:/Users/swamy.LAPTOP-0RVCTRRS/OneDrive/Desktop/Dailyfix Nexus/src/components/ConversationView/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { AIFeatures } from '../AIFeatures';\nimport type { Conversation, PlatformMessage, PriorityLevel } from '../../types/conversation';\nimport { ConversationSettings } from '../ConversationSettings';\n\n// Add type definitions for Web Speech API\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n  resultIndex: number;\n}\n\ninterface SpeechRecognitionError extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResult {\n  isFinal: boolean;\n  [index: number]: SpeechRecognitionAlternative;\n}\n\ninterface SpeechRecognitionAlternative {\n  transcript: string;\n  confidence: number;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onresult: (event: SpeechRecognitionEvent) => void;\n  onerror: (event: SpeechRecognitionError) => void;\n  start(): void;\n  stop(): void;\n  abort(): void;\n}\n\ninterface SpeechRecognitionConstructor {\n  new (): SpeechRecognition;\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition?: SpeechRecognitionConstructor;\n    webkitSpeechRecognition?: SpeechRecognitionConstructor;\n  }\n}\n\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'user' | 'contact';\n  timestamp: Date;\n  platform: string;\n}\n\ninterface ConversationViewProps {\n  conversation: Conversation | null;\n}\n\n// Update the styles by removing date-related CSS\nconst styles = `\n.conversation-content {\n  padding: 16px;\n  background-color: #e5ddd5;\n  height: calc(100vh - 180px);\n  overflow-y: auto;\n}\n\n.message-history {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.message-item {\n  display: flex;\n  flex-direction: column;\n  max-width: 70%;\n}\n\n.message-item.incoming {\n  align-self: flex-start;\n}\n\n.message-item.outgoing {\n  align-self: flex-end;\n}\n\n.message-bubble {\n  padding: 8px 12px;\n  border-radius: 8px;\n  position: relative;\n  margin-bottom: 4px;\n}\n\n.message-item.incoming .message-bubble {\n  background-color: #ffffff;\n  border-top-left-radius: 0;\n}\n\n.message-item.outgoing .message-bubble {\n  background-color: #dcf8c6;\n  border-top-right-radius: 0;\n}\n\n.message-content {\n  margin-bottom: 4px;\n}\n\n.message-meta {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #667781;\n}\n\n.platform-badge {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.message-time {\n  font-size: 0.7rem;\n  color: #667781;\n}\n\n.header-actions {\n  display: flex;\n  gap: 8px;\n  position: relative;\n}\n\n.settings-button {\n  background: none;\n  border: none;\n  padding: 8px;\n  cursor: pointer;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s;\n  font-size: 1.5rem;\n  line-height: 1;\n  color: #666;\n}\n\n.settings-button:hover {\n  background-color: #f5f5f5;\n}\n\n.settings-button span {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n`;\n\nexport const ConversationView: React.FC<ConversationViewProps> = ({ conversation }) => {\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isVoiceCommand, setIsVoiceCommand] = useState(false);\n  const [messageText, setMessageText] = useState('');\n  const [recordedAudio, setRecordedAudio] = useState<{ blob: Blob; url: string } | null>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const speechRecognitionRef = useRef<SpeechRecognition | null>(null);\n  const [showSettings, setShowSettings] = useState(false);\n\n  useEffect(() => {\n    // Initialize speech recognition\n    if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {\n      const SpeechRecognitionAPI = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (SpeechRecognitionAPI) {\n        speechRecognitionRef.current = new SpeechRecognitionAPI();\n        speechRecognitionRef.current.continuous = true;\n        speechRecognitionRef.current.interimResults = true;\n\n        speechRecognitionRef.current.onresult = (event: SpeechRecognitionEvent) => {\n          const results = Array.from(event.results);\n          const transcript = results\n            .map(result => result[0].transcript)\n            .join('');\n\n          if (event.results[0].isFinal) {\n            handleVoiceCommand(transcript.toLowerCase());\n          }\n        };\n\n        speechRecognitionRef.current.onerror = (event: SpeechRecognitionError) => {\n          console.error('Speech recognition error:', event.error);\n          setIsVoiceCommand(false);\n        };\n      }\n    }\n  }, []);\n\n  const handleVoiceCommand = (command: string) => {\n    // Enhanced voice command handling\n    if (command.includes('tag') || command.includes('label')) {\n      const tag = command.split(/tag|label/).pop()?.trim();\n      if (tag) {\n        addContextualTag(tag);\n      }\n    } else if (command.includes('priority')) {\n      const level = command.toLowerCase().includes('high') ? 'High' :\n                   command.toLowerCase().includes('medium') ? 'Medium' : 'Low';\n      updatePriority(level);\n    } else if (command.includes('summarize')) {\n      generateDailySummary();\n    } else if (command.includes('suggest reply')) {\n      generateAIReply();\n    } else if (command.includes('matrix room')) {\n      handleMatrixRoom(command);\n    } else {\n      // Default to message text\n      setMessageText(command);\n    }\n    setIsVoiceCommand(false);\n  };\n\n  const addContextualTag = (tag: string) => {\n    // Implementation for adding contextual tags\n    if (conversation) {\n      const updatedTags = [...conversation.contextualTags, tag];\n      // Update conversation tags\n      console.log('Added tag:', tag);\n    }\n  };\n\n  const updatePriority = (level: PriorityLevel) => {\n    // Implementation for updating priority\n    if (conversation) {\n      console.log('Updated priority to:', level);\n    }\n  };\n\n  const generateDailySummary = async () => {\n    // Implementation for generating daily summary\n    if (conversation?.messages) {\n      // Group messages by date and generate summary\n      console.log('Generating daily summary...');\n    }\n  };\n\n  const generateAIReply = async () => {\n    // Implementation for AI-generated replies\n    if (conversation?.lastMessage) {\n      // Generate AI reply based on context\n      console.log('Generating AI reply...');\n    }\n  };\n\n  const handleMatrixRoom = (command: string) => {\n    // Implementation for Matrix.org room management\n    console.log('Handling Matrix room command:', command);\n  };\n\n  const startVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      setIsVoiceCommand(true);\n      speechRecognitionRef.current.start();\n    } else {\n      alert('Speech recognition is not supported in your browser');\n    }\n  };\n\n  const stopVoiceCommand = () => {\n    if (speechRecognitionRef.current) {\n      speechRecognitionRef.current.stop();\n      setIsVoiceCommand(false);\n    }\n  };\n\n  const handleSendMessage = () => {\n    if (recordedAudio) {\n      // Send voice message\n      console.log('Sending voice message:', recordedAudio.blob);\n      setRecordedAudio(null);\n    } else if (messageText.trim()) {\n      // Send text message\n      const newMessage = {\n        id: Date.now().toString(),\n        text: messageText,\n        sender: 'user' as const,\n        time: new Date(),\n        platform: conversation?.platforms[0] || 'WhatsApp',\n      };\n      console.log('Sending text message:', newMessage);\n      setMessageText('');\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setRecordedAudio({ blob: audioBlob, url: audioUrl });\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n      alert('Unable to access microphone. Please check permissions.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n    }\n  };\n\n  const handleVoiceButtonClick = () => {\n    if (isRecording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n\n  const handleSettingsClick = (action: string) => {\n    switch (action) {\n      case 'search':\n        const searchText = prompt('Enter text to search in chat:');\n        if (searchText) {\n          alert(`Searching for: ${searchText}`);\n        }\n        break;\n      case 'media':\n        alert('Opening media gallery');\n        break;\n      case 'clear':\n        if (window.confirm('Are you sure you want to clear this chat?')) {\n          alert('Chat cleared');\n        }\n        break;\n      case 'block':\n        if (window.confirm('Are you sure you want to block this contact?')) {\n          alert('Contact blocked');\n        }\n        break;\n      case 'export':\n        alert('Exporting chat...');\n        break;\n      case 'mute':\n        alert('Notifications muted');\n        break;\n    }\n    setIsSettingsOpen(false);\n  };\n\n  const handleAIReplySelect = (reply: string) => {\n    setMessageText(reply); // This will update the message input\n  };\n\n  if (!conversation) {\n    return (\n      <div className=\"conversation-placeholder\">\n        Select a conversation to start messaging\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"conversation-view\">\n      <div className=\"conversation-header\">\n        <div className=\"header-left\">\n          <h2>{conversation.contact.name}</h2>\n          <div className=\"platform-badges\">\n            {conversation.platforms.map(platform => (\n              <span \n                key={platform} \n                className=\"platform-badge\"\n                data-platform={platform}\n              >\n                {platform}\n              </span>\n            ))}\n          </div>\n        </div>\n        <div className=\"header-actions\">\n          <button \n            className=\"settings-button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowSettings(!showSettings);\n            }}\n          >\n            <span role=\"img\" aria-label=\"settings\">⋮</span>\n          </button>\n          {showSettings && (\n            <ConversationSettings onClose={() => setShowSettings(false)} />\n          )}\n        </div>\n      </div>\n      \n      <div className=\"conversation-content\">\n        <div className=\"message-history\">\n          {conversation?.platformMessages\n            ?.sort((a, b) => a.lastActivity.getTime() - b.lastActivity.getTime())\n            .map((msg, index) => (\n              <div \n                key={`${msg.platform}-${index}`}\n                className={`message-item ${msg.isFromSender ? 'outgoing' : 'incoming'}`}\n              >\n                <div className=\"message-bubble\">\n                  {msg.messages.map((text, msgIndex) => (\n                    <div key={msgIndex} className=\"message-content\">\n                      {text}\n                    </div>\n                  ))}\n                  <div className=\"message-meta\">\n                    <span className=\"message-time\">\n                      {msg.lastActivity.toLocaleTimeString([], { \n                        hour: '2-digit',\n                        minute: '2-digit',\n                        hour12: true\n                      })}\n                    </span>\n                    <span \n                      className=\"platform-badge\"\n                      data-platform={msg.platform}\n                    >\n                      {msg.platform}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n\n      <AIFeatures \n        conversation={conversation} \n        onReplySelect={handleAIReplySelect}\n      />\n\n      <div className=\"message-input-container\">\n        {recordedAudio ? (\n          <div className=\"recorded-audio\">\n            <audio src={recordedAudio.url} controls />\n            <button \n              className=\"cancel-audio\"\n              onClick={() => setRecordedAudio(null)}\n              title=\"Cancel\"\n            >\n              ❌\n            </button>\n          </div>\n        ) : (\n          <>\n            <input \n              type=\"text\" \n              className={`message-input ${isVoiceCommand ? 'voice-active' : ''}`}\n              placeholder={isVoiceCommand ? 'Listening for voice command...' : 'Type a message or use voice command...'}\n              value={messageText}\n              onChange={(e) => setMessageText(e.target.value)}\n              onKeyPress={handleKeyPress}\n            />\n            <button \n              className={`voice-command-button ${isVoiceCommand ? 'active' : ''}`}\n              title={isVoiceCommand ? 'Stop Voice Command' : 'Start Voice Command'}\n              onClick={() => isVoiceCommand ? stopVoiceCommand() : startVoiceCommand()}\n            >\n              <span role=\"img\" aria-label=\"voice-command\">\n                {isVoiceCommand ? '🎙️' : '🗣️'}\n              </span>\n            </button>\n          </>\n        )}\n        <button \n          className={`voice-button ${isRecording ? 'recording' : ''}`}\n          title={isRecording ? 'Stop Recording' : 'Start Voice Recording'}\n          onClick={handleVoiceButtonClick}\n        >\n          <span role=\"img\" aria-label=\"voice\">\n            {isRecording ? '⏹️' : '🎤'}\n          </span>\n        </button>\n        <button \n          className={`send-button ${(messageText.trim() || recordedAudio) ? 'active' : ''}`}\n          onClick={handleSendMessage}\n          disabled={!messageText.trim() && !recordedAudio}\n        >\n          <span role=\"img\" aria-label=\"send\">📤</span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Helper function to generate AI replies (mock implementation)\nconst generateAIReplies = async (messages: any[]): Promise<string[]> => {\n  // In a real implementation, this would call your AI service\n  const commonReplies = [\n    \"I'll look into this and get back to you shortly\",\n    \"Thanks for bringing this to my attention\",\n    \"Could you clarify your requirements?\",\n    \"Let me check with the team and update you\",\n    \"I understand, I'll prioritize this task\",\n    \"Would you like to schedule a call to discuss this?\",\n  ];\n  \n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  \n  // Return 3 random replies\n  return commonReplies\n    .sort(() => Math.random() - 0.5)\n    .slice(0, 3);\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}